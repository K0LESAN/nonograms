(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const q of t)if(q.type==="childList")for(const a of q.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const q={};return t.integrity&&(q.integrity=t.integrity),t.referrerPolicy&&(q.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?q.credentials="include":t.crossOrigin==="anonymous"?q.credentials="omit":q.credentials="same-origin",q}function o(t){if(t.ep)return;t.ep=!0;const q=n(t);fetch(t.href,q)}})();const A={"5x5":[{name:"Dinosaur",template:[[0,0,0,1,1],[0,0,0,1,0],[0,1,1,1,0],[0,1,1,1,0],[1,1,0,1,0]]},{name:"Fan",template:[[0,1,0,0,0],[0,1,0,1,1],[0,0,1,0,0],[1,1,0,1,0],[0,0,0,1,0]]},{name:"Minimalism. Dawn over the hills",template:[[0,0,0,0,1],[0,0,0,0,0],[0,1,1,0,0],[1,1,0,1,0],[0,1,1,0,1]]},{name:"Heart",template:[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]]},{name:"Camel",template:[[0,0,0,1,1],[1,1,0,1,0],[1,1,1,1,0],[1,0,1,0,0],[1,0,1,0,0]]}],"10x10":[{name:"Snowman",template:[[1,1,1,0,0,0,0,1,1,1],[0,1,0,0,1,0,1,0,1,1],[1,1,0,0,0,1,1,1,1,1],[0,1,0,0,0,0,0,0,1,0],[1,1,1,0,0,0,0,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,0,0,1,0,0,0,0,0,1],[1,0,0,1,0,1,0,0,0,1],[1,0,0,1,0,0,0,0,0,1],[1,1,0,0,0,1,0,0,1,1]]},{name:"Turnip",template:[[0,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,0,1,1,1,0],[1,1,0,0,1,1,1,1,1,1],[1,1,0,0,0,1,0,0,1,1],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,0,0,0,1,1,0],[0,0,1,0,0,0,0,0,1,0],[1,1,1,0,0,0,0,0,1,1],[1,1,1,1,0,0,0,1,1,1],[1,1,1,1,1,0,1,1,1,1]]},{name:"Cat",template:[[0,0,0,0,0,0,1,1,1,0],[1,0,0,0,1,0,1,0,1,1],[1,1,0,1,1,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,1],[1,0,1,0,1,0,0,0,0,1],[1,1,1,1,1,0,0,1,1,1],[0,1,1,1,0,0,1,1,1,1],[0,0,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,0,1,1]]},{name:"Jug",template:[[0,0,1,1,1,1,1,1,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,0,1,1,1,1,0],[0,1,0,1,0,1,0,1,1,0],[0,1,0,0,0,1,0,0,1,0],[1,1,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,1,1],[1,1,1,0,0,0,0,1,1,1]]},{name:"Kettle",template:[[0,0,1,1,1,1,1,0,0,0],[0,1,0,0,0,0,0,1,0,0],[0,1,0,0,1,0,0,1,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,0,1],[1,0,1,1,1,1,1,1,1,1],[1,0,0,1,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0]]}],"15x15":[{name:"Elephant",template:[[0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,1,1,1,1,1,0],[1,1,0,1,0,0,0,0,0,0,1,0,0,1,1],[1,0,0,0,1,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,1,0,0,1],[1,0,0,1,0,1,0,0,0,0,0,1,0,0,1],[1,1,0,1,1,1,0,0,1,0,0,1,0,1,1],[0,1,1,1,1,0,0,0,1,0,1,1,1,1,0],[0,1,0,1,0,0,0,1,1,1,1,0,0,0,0],[0,1,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,0,1,0,0,1,1,1,0],[1,1,1,1,1,1,1,0,1,0,0,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},{name:"Lion",template:[[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[1,0,0,1,1,1,1,1,1,0,0,1,1,1,0],[1,0,1,1,0,1,0,0,1,1,0,1,1,1,0],[1,1,1,0,0,1,0,0,0,1,1,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,0,1,0,0,0,0,1,0,0,0,1,1,1,1],[1,0,0,1,0,1,0,0,0,0,0,1,1,1,1],[1,0,0,1,1,1,0,0,0,0,0,1,0,1,1],[1,1,0,1,1,1,0,0,0,1,1,1,1,0,1],[1,1,0,0,1,0,0,0,0,1,1,0,1,0,1],[1,1,0,1,1,1,1,0,1,1,1,0,1,1,0],[1,1,1,0,0,0,0,1,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,0,1,0],[1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0,0]]},{name:"Coffee",template:[[1,1,0,0,0,0,0,0,1,0,0,1,0,1,1],[1,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,0,0,1,1,1,1,1],[1,1,1,0,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,0,0,0,1],[1,1,0,1,1,1,1,1,1,1,1,0,1,1,0],[1,1,0,0,1,1,1,1,1,1,0,0,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,1,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,1,1],[1,0,1,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,1,1,0,0,0,0,0,0,1,1,0,0,1],[0,0,0,1,1,1,1,1,1,1,1,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,0,0,0,0,0,0,0,0,1,1,1,1]]},{name:"Cow",template:[[0,0,0,1,1,1,1,1,0,0,0,0,0,0,0],[1,1,1,0,0,1,1,1,1,1,0,0,0,0,0],[1,1,0,0,0,1,1,1,1,1,0,0,0,0,0],[0,1,0,1,0,1,1,0,1,0,0,0,0,0,0],[0,1,0,0,0,0,1,1,1,1,1,1,1,1,0],[0,1,0,1,1,1,1,1,1,0,1,1,1,1,1],[0,1,1,0,0,0,1,1,1,0,1,1,1,1,1],[0,1,0,0,0,0,0,1,0,0,1,1,1,1,1],[0,0,1,1,1,1,1,0,0,1,0,1,1,1,1],[0,0,0,1,0,0,0,0,1,1,0,0,0,0,1],[0,0,0,1,1,0,0,0,1,1,1,0,0,0,1],[0,0,0,1,1,1,0,0,0,0,0,0,0,0,1],[0,0,0,1,1,1,1,1,0,1,1,1,1,0,1],[0,0,0,1,0,1,0,1,0,1,0,0,1,0,1],[0,0,0,1,1,1,0,1,1,1,0,0,1,1,1]]},{name:"Elk",template:[[1,0,0,1,0,0,0,0,0,0,0,1,0,0,1],[1,1,0,1,1,0,0,0,0,0,1,1,0,1,1],[1,1,0,1,1,0,1,0,1,0,1,1,0,1,1],[0,1,1,1,1,0,1,0,1,0,1,1,1,1,0],[0,0,1,1,1,1,0,0,0,1,1,1,1,0,0],[0,0,0,1,1,0,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,0,1,1,0,1,1,1,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,1,1,1,1,1,1],[0,1,0,1,1,0,0,0,0,1,1,1,1,1,1],[0,1,1,1,1,0,0,0,0,1,1,1,1,1,1],[0,0,1,1,1,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1]]}]},u={start:function(){this.timer||(this.timer=setInterval(()=>{this.seconds++,this.seconds===60&&(this.minutes++,this.seconds=0),this.secondsDOM.textContent=String(this.seconds).padStart(2,"0"),this.minutesDOM.textContent=String(this.minutes).padStart(2,"0")},1e3))},stop:function(){clearInterval(this.timer),this.timer=null,this.seconds=0,this.minutes=0},preStart:function(e,s=0,n=0){const o=t=>{t.target.closest(".game-field__item")&&(this.start(),t.currentTarget.removeEventListener("mousedown",o),t.currentTarget.removeEventListener("touchstart",o))};this.seconds=s,this.minutes=n,this.secondsDOM.textContent=String(this.seconds).padStart(2,"0"),this.minutesDOM.textContent=String(this.minutes).padStart(2,"0"),e.addEventListener("mousedown",o),e.addEventListener("touchstart",o)},timer:null,secondsDOM:null,minutesDOM:null,seconds:0,minutes:0},_=""+new URL("cross-XTg0k0ql.mp3",import.meta.url).href,R=""+new URL("fill-Tx5F3BaY.mp3",import.meta.url).href,T="data:audio/mpeg;base64,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",U=""+new URL("win-TjNWy32Y.mp3",import.meta.url).href;let E=!1;function L(e){const s=document.createElement("audio");return s.src=e,s}const g={fill:L(R),cross:L(_),none:L(T),win:L(U)};function h(e){var n,o,t,q;if(h.isCancel)return;if(e==="win"){(n=g[e])==null||n.load(),(o=g[e])==null||o.play();return}if(E)return;E=!0;const s={0:"none",1:"fill",2:"cross"};e in s&&(e=s[e]),(t=g[e])==null||t.load(),(q=g[e])==null||q.play(),setTimeout(()=>{E=!1},115)}function w(e,s){const n=[],o=e.length,t=s?q=>q:q=>Number(q.getAttribute("data-status"))||0;for(let q=0;q<5;q++){const a=[];for(let c=0;c<o;c++){const r=e[c].children;for(let d=0;d<5;d++)a.push(t(r[d+5*q]))}n.push(a)}return n}function y(e,s=!1){const n=[],o=e.children.length,t=Math.sqrt(o);let q=0;for(;q<o;)n.push(...w(Array.from(e.children).slice(q,q+t),s)),q+=t;return n}function Q(e,s){if(!e)return;const n=JSON.parse(localStorage.getItem("k32d04sXgxnd312bd-records"))||[],o={};for(o.name=s.getAttribute("data-current-template"),o.size=Math.sqrt(s.children.length)*5,o.time=u.minutes*60+u.seconds;n.length>4;)n.shift();n.push(o),localStorage.setItem("k32d04sXgxnd312bd-records",JSON.stringify(n))}function S(e,s=!1,n=!1,o=!0){e||(e=document.querySelector(".game-field")),Q(o,e),u.stop(),n&&u.preStart(e),e.removeEventListener("mousedown",p),e.removeEventListener("mousemove",p),e.removeEventListener("touchstart",p),s&&(e.addEventListener("mousedown",p),e.addEventListener("touchstart",p))}function V(e,s){const n=e.length;for(let o=0;o<n;o++)for(let t=0;t<n;t++)if(e[o][t]%2!==s[o][t])return!1;return!0}function I(){const e=document.querySelector(".game-field"),s=y(e),n=JSON.parse(localStorage.getItem("k32d04sXgxnd312bd-currentGame"));if(!V(s,n))return;const o=document.querySelector(".modal"),t=u.seconds+u.minutes*60;o.querySelector(".modal__seconds").textContent=t,o.classList.add("open"),h("win"),S()}function x(e){e.preventDefault()}function z(e,s){let n=e;return document.addEventListener("contextmenu",x),function o(t){const q=t.target.closest(".game-field__item");if(t.preventDefault(),t.buttons===0){document.removeEventListener("mousemove",o),document.removeEventListener("contextmenu",x);return}if(n===t.target||(n=t.target,!q))return;(Number(q.getAttribute("data-status"))||0)!==s&&(h(s),q.setAttribute("data-status",s),I())}}function p(e){const s=e.target.closest(".game-field__item"),n=window.matchMedia("screen and (hover: none) and (pointer: coarse)").matches;if(e.cancelable&&e.preventDefault(),!s||e.type.includes("mouse")&&n)return;const o=Number(s.getAttribute("data-status")),t=e.buttons===1;let q=null;n?q=(o+1)%3:q=t?o%2^1:[2,2,0][o],s.setAttribute("data-status",q),h(q),n||document.addEventListener("mousemove",z(s,q)),I()}function G(e){function s(q,a,c){return a?(c?q.push(1):q[q.length-1]++,!1):!0}const{length:n}=e,o=[],t=[];for(let q=0;q<n;q++){let a=!0,c=!0;t.push([]),o.push([]);for(let r=0;r<n;r++)c=s(t.at(-1),e[q][r],c),a=s(o.at(-1),e[r][q],a)}return{topHints:o,leftHints:t}}function M(e,s,n){const o=document.querySelector(`.${n}-hints`),t=e/5,q=5;let a=0;o.innerHTML="";for(let c=0;c<t;c++){const r=document.createElement("div");r.classList.add(`${n}-hints__subgrid`),o.append(r);for(let d=0;d<q;d++){const i=document.createElement("div");i.classList.add(`${n}-hints__item`),r.append(i);for(const l of s[a++]){const m=document.createElement("div");m.classList.add(`${n}-hints__text`),m.textContent=l,i.append(m)}}}}function v(e,s,n,o=!0){const t=document.querySelector(".game-field"),q=document.querySelector(".caption-game-field"),a=(e/5)**2,c=e/5,{leftHints:r,topHints:d}=G(s),i=25;u.stop(),o&&u.preStart(t),t.innerHTML="",t.setAttribute("data-current-template",n),t.style.gridTemplateColumns=`repeat(${c}, min-content)`,t.style.gridTemplateRows=`repeat(${c}, min-content)`,q.textContent=n;for(let l=0;l<a;l++){const m=document.createElement("div");m.classList.add("game-field__subgrid"),t.append(m),(l+1)%c===0&&m.setAttribute("data-last-right-subgrid","");for(let f=0;f<i;f++){const b=document.createElement("div");b.classList.add("game-field__item"),m.append(b)}}Array.from(t.children).slice(-c).forEach(l=>{l.setAttribute("data-last-bottom-subgrid","")}),M(e,r,"left"),M(e,d,"top"),localStorage.setItem("k32d04sXgxnd312bd-currentGame",JSON.stringify(s)),t.addEventListener("mousedown",p),t.addEventListener("touchstart",p)}function k(e){const s=e.target.closest(".select__button"),n=e.currentTarget,o=n.children[0],t=n.children[1];if(!s)return;const q=o.options.selectedIndex,a=t.options.selectedIndex,c=o[q].value,r=t[a].value,{template:d}=A[c].find(({name:i})=>r===i);v(Number(c.split("x")[0]),d,r)}function H(e){const s=e.target.closest(".select-sizes"),o=e.currentTarget.children[1];if(!s)return;const t=e.target.value;o.innerHTML="";for(const{name:q}of A[t]){const a=document.createElement("option");a.classList.add("select-sizes__item"),a.textContent=q,a.value=q,o.append(a)}}function N(){const e=localStorage.getItem("k32d04sXgxnd312bd-savedGame"),s=document.querySelector(".game-field");if(!e)return;const{size:n,template:o,savedTemplate:t,name:q,minutes:a,seconds:c}=JSON.parse(e);u.stop(),localStorage.setItem("k32d04sXgxnd312bd-currentGame",JSON.stringify(o)),v(n,o,q,!1),u.preStart(s,c,a),s.innerHTML=t}function O(){const e=document.querySelector(".game-field");for(const s of e.children)for(const n of s.children)n.setAttribute("data-status",0);S(e,!0,!0,!1)}function j(){const e=c=>Math.floor(Math.random()*c.length),s=Object.keys(A),n=s[e(s)],o=A[n],{name:t,template:q}=o[e(o)],a=Number(n.split("x")[0]);v(a,q,t)}function B(){const e=document.querySelector(".game-field"),s=e.children.length,n={size:Math.sqrt(s)*5,name:e.getAttribute("data-current-template")};n.savedTemplate=e.innerHTML,n.template=JSON.parse(localStorage.getItem("k32d04sXgxnd312bd-currentGame")),n.minutes=u.minutes,n.seconds=u.seconds,localStorage.setItem("k32d04sXgxnd312bd-savedGame",JSON.stringify(n))}function Z(){const e=JSON.parse(localStorage.getItem("k32d04sXgxnd312bd-currentGame")),s=document.querySelector(".game-field"),n=y(s,!0),o=n.length;S(s,!1,!1,!1);for(let t=0;t<o;t++){const q=n[t].length;for(let a=0;a<q;a++)n[t][a].setAttribute("data-status",e[t][a])}}function D(){const e=JSON.parse(localStorage.getItem("k32d04sXgxnd312bd-records"))||[],s=[].concat(e).sort((o,t)=>o.time-t.time),n=[];for(const o of s){const{name:t,size:q,time:a}=o,c=String(Math.floor(a/60)).padStart(2,"0"),r=String(a%60).padStart(2,"0"),d=document.createElement("tr"),i=document.createElement("td"),l=document.createElement("td"),m=document.createElement("td");d.classList.add("modal-score__row"),i.classList.add("modal-score__cell"),l.classList.add("modal-score__cell"),m.classList.add("modal-score__cell"),i.textContent=t,l.textContent=`${q}x${q}`,m.textContent=`${c}:${r}`,d.append(i,l,m),n.push(d)}return n}function J(){const e=document.querySelector(".modal-score"),s=document.querySelector(".modal-score__tbody");return s.innerHTML="",s.append(...D()),e.classList.add("open"),0}const X={random:j,restart:O,save:B,continue:N,solution:Z,"score-table":J};let C=!1;function W(e){const s=e.target.closest(".menu__item"),n=s==null?void 0:s.getAttribute("data-action"),o=X[n];!s||!o||n==="save"&&C||(C=n==="solution",o())}function F(){const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("span"),t=document.createElement("span"),q=document.createElement("div"),a=document.createElement("div"),c=window.matchMedia("screen and (prefers-color-scheme: dark)").matches;return e.classList.add("app__wrapper"),s.classList.add("timer"),a.classList.add("sound-button"),n.classList.add("theme-switch"),o.classList.add("timer__minutes"),t.classList.add("timer__seconds"),q.classList.add("theme-switch__item"),e.append(s,a,n),s.append(o,":",t),n.append(q),c&&n.classList.add("theme-switch_active"),n.addEventListener("click",r=>{r.target.closest(".theme-switch")&&document.body.classList.toggle("dark")}),a.addEventListener("click",r=>{const d=r.target.closest(".sound-button");if(!d)return;const i=d.hasAttribute("data-off");h.isCancel=!i,i?(d.textContent="on",d.removeAttribute("data-off")):(d.textContent="off",d.setAttribute("data-off",""))}),o.textContent="00",t.textContent="00",a.textContent="on",u.minutesDOM=o,u.secondsDOM=t,e}function P(){const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div");return e.classList.add("nonogram"),s.classList.add("top-hints","nonogram__top-hints"),n.classList.add("left-hints","nonogram__left-hints"),o.classList.add("game-field","nonogram__game-field"),o.addEventListener("contextmenu",t=>{t.preventDefault()}),o.addEventListener("mousedown",p),o.addEventListener("touchstart",p),e.append(s,n,o),e}function K(){const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),t=document.createElement("div"),q=document.createElement("div"),a=document.createElement("div");return e.classList.add("menu"),s.classList.add("menu__item"),n.classList.add("menu__item"),o.classList.add("menu__item"),t.classList.add("menu__item"),q.classList.add("menu__item"),a.classList.add("menu__item"),e.addEventListener("click",W,{passive:!0}),s.textContent="Save game",n.textContent="Reset game",o.textContent="Continue last game",t.textContent="Random game",q.textContent="Solution",a.textContent="High score table",s.setAttribute("data-action","save"),n.setAttribute("data-action","restart"),o.setAttribute("data-action","continue"),t.setAttribute("data-action","random"),q.setAttribute("data-action","solution"),a.setAttribute("data-action","score-table"),e.append(s,n,o,t,q,a),e}function Y(){const e=document.createElement("div"),s=document.createElement("select"),n=document.createElement("select"),o=document.createElement("div");e.classList.add("select"),s.classList.add("select-sizes"),n.classList.add("select-templates"),o.classList.add("select__button"),o.textContent="Select a template",e.append(s,n,o),e.addEventListener("click",k,{passive:!0}),e.addEventListener("change",H,{passive:!0});for(const t in A){const q=document.createElement("option");q.classList.add("select-sizes__item"),q.textContent=t,q.value=t,s.append(q)}for(const{name:t}of A["5x5"]){const q=document.createElement("option");q.classList.add("select-sizes__item"),q.textContent=t,q.value=t,n.append(q)}return e}function $(){const s=A["5x5"],{name:n,template:o}=s[Math.floor(Math.random()*s.length)];v(5,o,n)}function ee(){const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("span"),t=document.createElement("div");return e.classList.add("modal"),s.classList.add("modal__wrapper"),n.classList.add("modal__text"),o.classList.add("modal__seconds"),t.classList.add("modal__button"),t.textContent="Exit",e.append(s),s.append(n,t),n.append("Great! You have solved the nonogram in ",o," seconds!"),t.addEventListener("click",q=>{q.target===t&&e.classList.remove("open")}),e}function te(){const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("table"),o=document.createElement("caption"),t=document.createElement("thead"),q=document.createElement("tr"),a=document.createElement("td"),c=document.createElement("td"),r=document.createElement("td"),d=document.createElement("tbody"),i=document.createElement("div");return e.classList.add("modal-score"),s.classList.add("modal-score__wrapper"),n.classList.add("modal-score__table"),o.classList.add("modal-score__caption"),t.classList.add("modal-score__thead"),q.classList.add("modal-score__row"),a.classList.add("modal-score__cell"),c.classList.add("modal-score__cell"),r.classList.add("modal-score__cell"),d.classList.add("modal-score__tbody"),i.classList.add("modal-score__button"),i.textContent="Exit",o.textContent="High score table",a.textContent="Name",c.textContent="Size",r.textContent="Time",e.append(s),s.append(n,i),n.append(o,t,d),q.append(a,c,r),t.append(q),i.addEventListener("click",l=>{l.target===i&&e.classList.remove("open")}),e}function ne(){const e=document.createElement("div"),s=document.createElement("div"),n=F(),o=ee(),t=te(),q=P(),a=K(),c=Y(),r=document.createElement("div"),d=window.matchMedia("screen and (prefers-color-scheme: dark)").matches;e.classList.add("app"),s.classList.add("container"),r.classList.add("caption-game-field"),e.append(s,o,t,...Object.values(g)),s.append(n,r,q,a,c),d&&document.body.classList.add("dark"),document.body.append(e),$();const i=document.querySelector(".select-templates").options,l=i.length,m=document.querySelector(".game-field").getAttribute("data-current-template");for(let f=0;f<l;f++)if(i[f].value===m){i.selectedIndex=f;break}}window.addEventListener("load",ne,{passive:!0,once:!0});
